#import <bits/stdc++.h>
#define Q q.push(s
#define K (s&15L<<
#define S std::

using L = long;
S queue<L> q;
S unordered_map<L, L> x;
L d = 9, s, i, j;

main () {
    for (Q); d--; s = 16*s + i) S cin >> i;

    for (Q); (s = q.front()) - 4886718345; q.pop())
        if (!s)
            Q), ++d;
        else if (!x[s]++)
            for (L I : { 1, 11, 31, 41, 61, 71, 3, 33, 13, 43, 23, 53 })
                j = I%9*4, i = I/9*4, Q + (K i) << j-i) + (K j) >> j-i) - K j) - K i));

    S cout << d;
}